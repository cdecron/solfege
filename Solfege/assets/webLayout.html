<!DOCTYPE html>
<html>
<head>

  <title>The VexFlow Tutorial</title>

  <!-- VexFlow Compiled Source -->
  <script src="vexflow-min.js"></script>

  <!-- Support Sources -->
  <script src="jquery.js"></script>
  <script src="raphael.js"></script>

  <style type="text/css">
    canvas {
      background: #eed;
      padding: 10px;
      border: 10px solid #ddc;
    }

    div.egcode {
      font-family: Courier;
      font-size: 14px;
    }
  </style>

  <script>
    /* Take raw javascript code, and return moderately useful HTML */
    function prettify_code(code) {
      var lines = code.split(/\r\n|\n|\r/);
      var new_lines = [];
      for (var j = 0; j < lines.length; ++j) {
        code = lines[j];
        code = code.replace(/\s/g, "&nbsp;");
        code = code.replace(/>/g, "&gt;");
        code = code.replace(/</g, "&lt;");
        new_lines.push(code);
      }

      pretty_code = "<div class='egcode'>" + new_lines.join("<br/>") + "</div>";
      return pretty_code;
    }

    /*
       Find all the javascript examples and copy their source code
       into the associated <code> blocks.
    */
    $(function() {
      $("div.description").each(function(index, sel) {
        codes = $(sel).find("code.example");
        codes.each(function(i, s) {
          var example = $(s).attr("example");
          var code = $($(sel).find(
            "div.example." + example + " script")[0]).html();
          $(s).html(prettify_code(code));
         })
      })
    })
  </script>
</head>

<body>
	<script type="text/javascript">
        function show() {
        
	        //document.general.champ1.value =("MainGauche.genereAccord :"+ maingauche.genereAccord("maj",1));
	        window.accord = (""+ maingauche.genereAccordAbc("maj",document.general.chordInput.value));
            //document.general.champ1.value = window.accord[0];
            drawNotes();
        }
       </script>
	<FORM name="general">
		<input type="button" name="champ1" value="Va chercher du java !" onClick="show()" />
        <INPUT type="text" value="1" name="chordInput">
		<div class="content">
			<div class="description two">
				<div class="example a">
					<canvas width=525 height=120></canvas>
					<script>
                		  var canvas = $("div.two div.a canvas")[0];
                		  var renderer = new Vex.Flow.Renderer(canvas, Vex.Flow.Renderer.Backends.CANVAS);
                
                          function drawNotes(){
                          canvas.width = canvas.width;
                          
                		  var ctx = renderer.getContext();
                		  var stave = new Vex.Flow.Stave(10, 0, 500);
                		  stave.addClef("bass").setContext(ctx).draw();
                		  
                		  //NOW HERE, NEED TO CONVERT window.accord, WHICH LOOKS LIKE "a b c", INTO SOMETHING VEXFLOW UNDERSTANDS
                                //done
                          
                    		  // Create the notes
                    		  var notes = [
                    	   //NEED TO UNDERSTAND WHY IT PUTS AN E CHORD WHEN I ASK FOR A C CHORD...
                    			new Vex.Flow.StaveNote({ keys: [window.accord[0]+"/4", window.accord[2]+"/4", window.accord[4]+"/4"], duration: "w" })
                    		  ];
                    
                    		  // Create a voice in 4/4
                    		  var voice = new Vex.Flow.Voice({
                    			num_beats: 4,
                    			beat_value: 4,
                    			resolution: Vex.Flow.RESOLUTION
                    		  });
                    
                    		  // Add notes to voice
                    		  voice.addTickables(notes);
                    
                    		  // Format and justify the notes to 500 pixels
                    		  var formatter = new Vex.Flow.Formatter().
                    			joinVoices([voice]).format([voice], 500);
                    
                    		  // Render voice
                    		  voice.draw(ctx, stave);
                          }
                	</script>
				</div>
			</div>
		</div>
	</FORM>




</body>

</html>
