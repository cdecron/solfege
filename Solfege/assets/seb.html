<!DOCTYPE html>
<html>
<head>
  <title>The VexFlow Tutorial</title>

  <!-- VexFlow Compiled Source -->
  <script src="vexflow-min.js"></script>

  <!-- Support Sources -->
  <script src="jquery.js"></script>
  <script src="raphael.js"></script>

  <style type="text/css">
    canvas {
      background: #eed;
      padding: 10px;
      border: 10px solid #ddc;
    }

    div.egcode {
      font-family: Courier;
      font-size: 14px;
    }
  </style>

  <script>
    /* Take raw javascript code, and return moderately useful HTML */
    function prettify_code(code) {
      var lines = code.split(/\r\n|\n|\r/);
      var new_lines = [];
      for (var j = 0; j < lines.length; ++j) {
        code = lines[j];
        code = code.replace(/\s/g, "&nbsp;");
        code = code.replace(/>/g, "&gt;");
        code = code.replace(/</g, "&lt;");
        new_lines.push(code);
      }

      pretty_code = "<div class='egcode'>" + new_lines.join("<br/>") + "</div>";
      return pretty_code;
    }

    /*
       Find all the javascript examples and copy their source code
       into the associated <code> blocks.
    */
    $(function() {
      $("div.description").each(function(index, sel) {
        codes = $(sel).find("code.example");
        codes.each(function(i, s) {
          var example = $(s).attr("example");
          var code = $($(sel).find(
            "div.example." + example + " script")[0]).html();
          $(s).html(prettify_code(code));
         })
      })
    })
  </script>
</head>

    <body>
      <script type="text/javascript">
        function show() {
        
        //en fait j'en suis là.....l'appel de la ligne suivante va appeler la fonction java genereAccord de l'objet maingauche
        //qui est une instanciation de la classe MainGauche(il fallait le créer dans le MainActivity...)
        //Ce qu'il faudrait c'est que au lieu d'afficher le résultat dans le bouton, elle passe ce résultat au script qui 
        //est plus loin (var notes = [blabla....]) pour qu'il prenne ce résultat comme notes ! (et au passage il ne prends que
        //des trucs du style c e g....donc il faut convertir notre midi en c e g etc 
        // en fait je l'avais déjà fait dans le projet précédant : 
        //
        //private static final String[] notes= { "c", "c#", "d", "d#","e","f","f#","g","g#","a", "a#", "b","b#" }; // find the octave number
        //static int midiToOctave(int midi) { return midi/12-1; } // find the note name 
        //static String  midiToNote(int midi) { return notes[midi%12]; } // find the midi number 
    
        //int noteToMidi(String note, int octave) {    
        //int i;    
        //for (i= 0; i < notes.length; i++)       
        //    if (note.equals(notes[i]))          
        //        return 12*(octave+1)+i;    
        //return -1; }
        
        //             VOILA C EST INTENSE MAIS C EST CA QU EST CA !
        
        
           document.forms["general"].elements["champ1"].value=("MainGauche.genereAccord :"+ maingauche.genereAccord("maj",1));
        }
       </script>
        <FORM name="general">
        <input type="button" name="champ1" value="Va chercher du java !" onClick= "show()"/>
              <div class="content">
              
            			<div class="description two">
                			  <div class="example a" example="a">
                				<canvas width=525 height=120></canvas>
                				<script>
                		  var canvas = $("div.two div.a canvas")[0];
                		  var renderer = new Vex.Flow.Renderer(canvas,
                			Vex.Flow.Renderer.Backends.CANVAS);
                
                		  var ctx = renderer.getContext();
                		  var stave = new Vex.Flow.Stave(10, 0, 500);
                		  stave.addClef("treble").setContext(ctx).draw();
                
                		  // Create the notes
                		  var notes = [
                			// A quarter-note C.
                			new Vex.Flow.StaveNote({ keys: ["c/4"], duration: "q" }),
                
                			// A quarter-note D.
                			new Vex.Flow.StaveNote({ keys: ["d/4"], duration: "q" }),
                
                			// A quarter-note rest. Note that the key (b/4) specifies the vertical
                			// position of the rest.
                			new Vex.Flow.StaveNote({ keys: ["b/4"], duration: "qr" }),
                
                			// A C-Major chord.
                			new Vex.Flow.StaveNote({ keys: ["c/4", "e/4", "g/4"], duration: "q" })
                		  ];
                
                		  // Create a voice in 4/4
                		  var voice = new Vex.Flow.Voice({
                			num_beats: 4,
                			beat_value: 4,
                			resolution: Vex.Flow.RESOLUTION
                		  });
                
                		  // Add notes to voice
                		  voice.addTickables(notes);
                
                		  // Format and justify the notes to 500 pixels
                		  var formatter = new Vex.Flow.Formatter().
                			joinVoices([voice]).format([voice], 500);
                
                		  // Render voice
                		  voice.draw(ctx, stave);
                				</script>
                			  </div> 
            		   </div>
            
              </div>
          </FORM>
      
    
    
      
    </body>

</html>
